<!DOCTYPE html>
<html lang="en">

<head>
    <title>profile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="css/bootstrap.css">
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
    <link rel="stylesheet" type="text/css" href="http://www.jq22.com/jquery/font-awesome.4.6.0.css"><!-- 图标样式 -->
    <link rel="stylesheet" type="text/css" href="./css/home.css">
    <link rel="stylesheet" type="text/css" href="./css/profile.css">
    <link rel="stylesheet" href="./css/ionicons.min.css">

    <script src="js/jquery-2.2.3.min.js"></script>
    <script src="js/jquery-scrolltofixed-min.js" type="text/javascript"></script><!-- 导航栏 -->
    <script type="text/javascript" src="js/move-top.js"></script>
    <script type="text/javascript" src="js/easing.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/jquery.menu-aim.js"></script>
    <script src="js/main.js"></script><!-- 导航栏 -->
    <script src="js/custom.js"></script>
</head>
<body>

<div id="app">
    <div class="header">
        <div class="w3ls-header">
            <div class="w3ls-header-left">
                <p>
                    <a href="#"><img style="position: relative;left: -10px; top: -1px" src="./images/shopping.png">
                        XB全新高端购物平台
                    </a>
                </p>
            </div>
            <div class="w3ls-header-right">
                <ul>
                    <li class="dropdown head-dpdn">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"
                                aria-hidden="true"></i>人名<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="profile.html">个人中心</a></li>
                            <li><a href="login.html">注销</a></li>
                        </ul>
                    </li>
                    <li class="dropdown head-dpdn">
                        <a href="car.html" class="dropdown-toggle"><i class="fa fa-gift" aria-hidden="true"></i>购物车</a>
                    </li>
                    <li class="dropdown head-dpdn">
                        <a href="waitPay.html" class="dropdown-toggle"><i class="fa fa-credit-card-alt"
                                aria-hidden="true"></i>待支付</a>
                    </li>
                </ul>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="header-two">
            <div class="container">
                <div class="header-logo">
                    <h1><a href="home.html"><span>X</span>Biao </a></h1>
                    <h6>Your stores. Your place.</h6>
                </div>
                <div class="header-search">
                    <!--<form action="#" method="post">
                        <input type="search" name="Search" placeholder="Search for a Product..." required="">
                        <button type="submit" class="btn btn-default" aria-label="Left Align">
                            <i class="fa fa-search" aria-hidden="true"> </i>
                        </button>
                    </form>-->
                </div>
                <div class="header-cart">
                    <div class="my-account">
                        <a href="javascript:;"></a>
                    </div>
                    <div class="cart">
                        <a href="car.html">
                            <button class="w3view-cart" type="submit" name="submit" value=""><i
                                    class="fa fa-cart-arrow-down" aria-hidden="true"></i></button>
                        </a>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <div class="header-three">
            <div class="container">
                <ul class="nav nav-pills nav-justified">
                    <li v-for="category in categoryList"><a href="javascript:void(0);" @click="toDetail(category)">{{category.className}}</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- 个人中心 -->
    <div class="profile">
        <div class="container">
            <ol class="breadcrumb breadcrumb1">
                <li><a href="home.html">Home</a></li>
                <li class="active">个人中心</li>
            </ol>
            <div class="row">
                <div class="col-lg-4">
                    <!-- user -->
                    <div class="user">
                        <div class="user__head">
                            <div class="user__img">
                                <img :src="user.pic" alt="">
                            </div>
                            <input type="file" class="hidden uploadImg">
                        </div>
                        <div class="user__title">
                            <h2>{{user.realName}}</h2>
                            <p>{{user.info}}</p> <!--Front-end Developer-->

                            <div class="profile__actions">
                                <div class="post__location">
                                    <i class="icon ion-ios-navigate"></i>
                                    <span>{{user.address}}</span>
                                </div>

                                <div class="post__actions">
                                    <a class="post__actions-btn post__actions-btn--green" href="#">
                                        <i class="icon ion-ios-bookmark"></i>
                                    </a>
                                    <a class="post__actions-btn post__actions-btn--red" href="#">
                                        <i class="icon ion-ios-mail"></i>
                                    </a>
                                    <a href="#" class="post__actions-btn post__actions-btn--blue"><span>Hire</span></a>
                                </div>
                            </div>
                        </div>
                        <ul class="user__list">
                            <li><span>姓名:</span> <span>{{user.realName}}</span></li>
                            <li><span>年龄:</span> <span>{{user.age}}</span></li>
                            <li><span>性别:</span> <span>{{user.gender==1?'男':'女'}}</span></li>
                            <li><span>手机号:</span> <span>{{user.phone}}</span></li>
                        </ul>
                        <ul class="user__stats">
                            <li>
                                <p>订单</p>
                                <span>{{myCarShopCount}}</span>
                            </li>
                            <li>
                                <p>购物车</p>
                                <span>{{myOrderCount}}</span>
                            </li>
                        </ul>
                    </div>
                    <!-- end user -->
                    <!-- social -->
                    <div class="sidebox">
                        <div class="sidebox__share">
                            <span>Social:</span>
                            <ul>
                                <li class="facebook"><a href="#"><i class="icon ion-logo-facebook"></i></a></li>
                                <li class="instagram"><a href="#"><i class="icon ion-logo-instagram"></i></a></li>
                                <li class="twitter"><a href="#"><i class="icon ion-logo-twitter"></i></a></li>
                                <li class="vk"><a href="#"><i class="icon ion-logo-vk"></i></a></li>
                            </ul>
                        </div>
                    </div>
                    <!-- end social -->
                </div>
                <div class="col-lg-8">
                    <ul class="nav nav-tabs main__nav" id="main__nav" role="tablist">
                        <li role="presentation" class="nav-item" :class="active==1?'active':''" @click="getLoginUserAllOrder">
                            <a class="nav-link" data-toggle="tab" href="#tab-1" role="tab"
                                aria-controls="tab-1">我的订单</a>
                        </li>

                        <li role="presentation" class="nav-item" :class="active==2?'active':''" @click="selectUserFavorite">
                            <a class="nav-link" data-toggle="tab" href="#tab-2" role="tab"
                                aria-controls="tab-2">我的收藏</a>
                        </li>
                        <li role="presentation" class="nav-item" :class="active==3?'active':''">
                            <a class="nav-link" data-toggle="tab" href="#tab-3" role="tab"
                                aria-controls="tab-3">个人信息</a>
                        </li>
                        <li role="presentation" class="nav-item" :class="active==4?'active':''">
                            <a class="nav-link" data-toggle="tab" href="#tab-4" role="tab" aria-controls="tab-4">待评价</a>
                        </li>
                        <li role="presentation" class="nav-item" :class="active==5?'active':''">
                            <a class="nav-link" data-toggle="tab" href="#tab-5" role="tab"
                                aria-controls="tab-5">收货地址</a>
                        </li>
                    </ul>

                    <div class="tab-content">
                        <div class="tab-pane fade"  :class="active==1?'active':''" id="tab-1" role="tabpanel">
                            <!-- post -->
                            <div class="post">
                                <div class="goods-item" v-for="product in orderList">
                                    <div class="panel panel-default">
                                        <div class="panel-body">
                                            <div class="col-md-3 col-sm-2 col-xs-2  car-goods-info goods-image-column">
                                                <a href="javaScript:void(0);" @click="toProductDetail(product.productId)">
                                                    <img class="goods-image" :src="product.image" />
                                                </a>
                                            </div>
                                            <div class="col-md-3 col-sm-2 col-xs-2 car-goods-info goods-params">
                                                <p class="goods-info">
                                                    {{product.desc}}
                                                </p>
                                            </div>
                                            <div class="col-md-1 col-sm-2 col-xs-2 car-goods-info goods-price">
                                                <span class="goods-price single-price">￥{{product.price}}</span></div>
                                            <div class="col-md-2 col-sm-2 col-xs-2 car-goods-info goods-counts">
                                                <div class="input-group">
                                                    <input type="text" disabled class="btn num form-control goods-count"
                                                        :value="product.count">
                                                </div>
                                            </div>
                                            <div class="col-md-1 col-sm-2 col-xs-2 car-goods-info goods-money-count">
                                                <span class="goods-totalMoney single-total">￥{{product.totalPrice}}</span></div>
                                            <div class="col-md-2 col-sm-2 col-xs-2 car-goods-info goods-operate">
                                                <a v-if="product.state==1" href="waitPay.html" type="button" class="btn btn-danger item-sure">待支付</a>
                                                <a v-if="product.state==2" href="javaScript:void(0);" type="button" class="btn btn-success item-sure" @click="confirmReceive(product.orderId)">确认收货</a>
                                                <a v-if="product.state==3" href="javaScript:void(0);" type="button" class="btn btn-info item-sure">待评价</a>
                                                <a v-if="product.state==4" href="javaScript:void(0);" type="button" class="btn btn-primary item-sure">评价完成</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>



                        </div>

                        <div class="tab-pane fade"  :class="active==2?'active':''" id="tab-2" role="tabpanel">
                            <div class="post">
                                <div class="col-md-3 product-grids" v-for="product in favoriteList">
                                    <div class="agile-products">
                                        <div class="new-tag">
                                            <h6>TOP1 <br> Hot</h6>
                                        </div>
                                        <a href="javascript:void(0);"  @click="toProductDetail(product.id)"><img :src="product.image" class="img-responsive"
                                                alt="img">
                                        </a>
                                        <div class="agile-product-text">
                                            <h5><a href="goodsDetail.html">{{product.title}}</a></h5>
                                            <h6>${{product.price}}</h6>
                                            <h6>{{product.storeName}}</h6>
                                            <button type="button" class="w3ls-cart pw3ls-cart" @click="toProductDetail(product.id)">
                                                <i class="fa fa-cart-plus" aria-hidden="true"></i>查看详情
                                            </button>
                                        </div>
                                    </div>
                                </div>


                                <div class="col-md-12">
                                    <nav class="navbar-right" aria-label="Page navigation">
                                        <!--<ul class="pagination">
                                            <li class="disabled">
                                                <a href="#" aria-label="Previous">
                                                    <span aria-hidden="true">&laquo;</span>
                                                </a>
                                            </li>
                                            <li class="active"><a href="#">1</a></li>
                                            <li><a href="#">2</a></li>
                                            <li><a href="#">3</a></li>
                                            <li><a href="#">4</a></li>
                                            <li><a href="#">5</a></li>
                                            <li>
                                                <a href="#" aria-label="Next">
                                                    <span aria-hidden="true">&raquo;</span>
                                                </a>
                                            </li>
                                        </ul>-->
                                        <ul class="pagination">
                                            <li>
                                                <a href="javascript:void(0);" aria-label="Previous" @click="selectUserFavorite(pageCurrent-1)">
                                                    <span aria-hidden="true">&laquo;</span>
                                                </a>
                                            </li>


                                            <li v-for="i in pageTotal" :class="i==this.pageCurrent?'active':''"><a href="javascript:void(0);" @click="selectUserFavorite(i)">{{i}}</a></li>


                                            <li>
                                                <a href="javascript:void(0);" aria-label="Next" @click="selectUserFavorite(pageCurrent+1)">
                                                    <span aria-hidden="true">&raquo;</span>
                                                </a>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                                <div class="clearfix"> </div>
                            </div>
                        </div>

                        <div class="tab-pane fade" :class="active==3?'active':''" id="tab-3" role="tabpanel">
                            <!-- form -->
                            <form action="#" class="form">
                                <div class="row">
                                    <div class="col-12">
                                        <h2 class="form__title">个人信息</h2>
                                    </div>

                                    <div class="col-12 col-lg-6">
                                        <div class="form__group">
                                            <label for="loginName" class="form__label">用户名:</label>
                                            <input name="loginName" id="loginName" type="text" class="form__input" v-model="user.username">
                                        </div>
                                    </div>

                                    <div class="col-12 col-lg-6">
                                        <div class="form__group">
                                            <label for="email" class="form__label">Email:</label>
                                            <input name="email" id="email" type="text" class="form__input" v-model="user.email">
                                        </div>
                                    </div>

                                    <div class="col-12 col-lg-6">
                                        <div class="form__group">
                                            <label for="phone" class="form__label">手机号:</label>
                                            <input name="firstname" id="phone" type="text" class="form__input" v-model="user.phone">
                                        </div>
                                    </div>

                                    <div class="col-12 col-lg-6">
                                        <div class="form__group">
                                            <label for="address" class="form__label">收货地址:</label>
                                            <input name="address" disabled type="text" class="form__input" v-model="user.receiveAddress">
                                        </div>
                                    </div>

                                    <div class="col-12 col-lg-12">
                                        <div class="form__group">
                                            <label class="form__label">
                                                <span>性别：</span>
                                                <input class="form-inline" name="sex" type="radio" value="1" v-model="user.gender"> 男
                                                <input class="form-inline" type="radio" name="sex" value="0" v-model="user.gender"> 女
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <button class="form__btn" type="button" @click="updateUserInfo"><span>保存</span></button>
                                    </div>
                                </div>
                            </form>
                            <!-- end form -->

                            <!-- form -->
                            <form action="#" class="form">
                                <div class="row">
                                    <div class="col-12">
                                        <h2 class="form__title">修改密码</h2>
                                    </div>

                                    <div class="col-12 col-lg-12">
                                        <div class="form__group">
                                            <label for="oldpass" class="form__label">旧密码:</label>
                                            <input name="oldpass" id="oldpass" type="password" class="form__input" v-model="myPassword.password">
                                        </div>
                                    </div>

                                    <div class="col-12 col-lg-12">
                                        <div class="form__group">
                                            <label for="newpass" class="form__label">新密码:</label>
                                            <input name="newpass" id="newpass" type="password" class="form__input" v-model="myPassword.newPassword">
                                        </div>
                                    </div>

                                    <div class="col-12 col-lg-12">
                                        <div class="form__group">
                                            <label for="confirmpass" class="form__label">确认密码:</label>
                                            <input name="confirmpass" id="confirmpass" type="password"
                                                class="form__input" v-model="myPassword.newPassword2">
                                        </div>
                                    </div>

                                    <div class="col-12">
                                        <button class="form__btn" type="button" @click="toUpdatePassword"><span>重置密码</span></button>
                                    </div>
                                </div>
                            </form>
                            <!-- end form -->
                        </div>

                        <div class="tab-pane fade" :class="active==4?'active':''" id="tab-4" role="tabpanel">
                            <div class="post">
                                <div class="goods-item" v-for="p in waitEvalList">

                                    <div class="panel panel-default">
                                        <div class="panel-body">
                                            <div class="col-md-3 col-sm-2 col-xs-2 car-goods-info goods-image-column">
                                                <a href="javaScript:void(0);" @click="toProductDetail(p.productId)">
                                                    <img class="goods-image" :src="p.image" />
                                                </a>
                                            </div>
                                            <div class="col-md-3 col-sm-2 col-xs-2 car-goods-info goods-params">
                                                <p class="goods-info">
                                                    {{p.title}}
                                                </p>
                                            </div>
                                            <div class="col-md-1 col-sm-2 col-xs-2 car-goods-info goods-price">
                                                <span class="goods-price single-price">￥{{p.price}}</span></div>
                                            <div class="col-md-2 col-sm-2 col-xs-2 car-goods-info goods-counts">
                                                <div class="input-group">
                                                    <input type="text" disabled class="btn num form-control goods-count"
                                                        :value="p.count">
                                                </div>
                                            </div>
                                            <div class="col-md-1 col-sm-2 col-xs-2 car-goods-info goods-money-count">
                                                <span class="goods-totalMoney single-total">￥{{p.totalPrice}}</span></div>
                                            <div class="col-md-2 col-sm-2 col-xs-2 car-goods-info goods-operate">
                                                <a href="javaScript:void(0);" type="button" class="btn btn-warning item-sure" @click="toEvaluation(p.orderId)">评价</a>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>


                        </div>

                        <div class="tab-pane fade in" :class="active==5?'active':''" id="tab-5" role="tabpanel">
                            <div class="post">
                                <table class="table table-responsive table-border table-hover table-address">
                                    <tr>
                                        <th>收货人</th>
                                        <th>所在地区</th>
                                        <th>详细地址</th>
                                        <th>邮编</th>
                                        <th>电话/手机</th>
                                        <th>操作</th>
                                        <th>设置默认</th>
                                    </tr>
                                    <tr v-for="address in addressList">
                                        <td>{{address.userName}}</td>
                                        <td>{{address.area}}</td>
                                        <td>{{address.addressDetail}}</td>
                                        <td>{{address.postCode}}</td>
                                        <td>{{address.phone}}</td>
                                        <td>
                                            <a href="javascript:void(0);" @click="chaneDML(address)" class="btn btn-info">修改</a>
                                            <a class="btn btn-success"   href="javascript:;" @click="doDeleteAddress(address)">删除</a>
                                           <!-- data-toggle="modal" data-target=".bs-example-modal-sm"-->
                                        </td>
                                        <td>
                                            <button  :class="address.isDefault==1?'btn btn-danger':''">默认地址</button>
                                        </td>
                                    </tr>

                                </table>
                            </div>
                            <div class="post">
                                <!-- form -->
                                <form action="#" class="form">
                                    <div class="row">
                                        <div class="col-12">
                                            <h2 class="form__title">{{name}}</h2>
                                        </div>

                                        <div class="col-12 col-lg-6">
                                            <div class="form__group">
                                                <label for="uName" class="form__label">收货人:</label>
                                                <input name="uName" id="uName" type="text" class="form__input" v-model="newAddress.userName">
                                            </div>
                                        </div>

                                        <div class="col-12 col-lg-6">
                                            <div class="form__group">
                                                <label for="phone" class="form__label">电话:</label>
                                                <input name="phone" type="text" class="form__input" v-model="newAddress.phone">
                                            </div>
                                        </div>

                                        <div class="col-12 col-lg-6">
                                            <div class="form__group">
                                                <label class="form__label">所在地区:</label>
                                                <div class="bMap" id='case3'>

                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-12 col-lg-6">
                                            <div class="form__group">
                                                <label for="address" class="form__label">详细地址:</label>
                                                <input name="address" placeholder="如道路、门牌号、小区等" id="address" type="text"
                                                    class="form__input" v-model="newAddress.addressDetail">
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <button class="form__btn" type="button" @click="doSaveAddress"><span>{{btn}}</span></button>

                                            <div class="goods-checked">
                                                <input type="checkbox" :checked="newAddress.isDefault==1" @click="changeChecked(newAddress.isDefault==1)"> 设置为默认
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <!-- end form -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 个人中心 -->

    <!--删除确认弹框-->
    <div class="modal fade  bs-example-modal-sm" tabindex="-1" role="dialog" id="deleteItemTip"
         aria-labelledby="gridSystemModalLabel">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="gridSystemModalLabel">提示</h4>
                </div>
                <div class="modal-body">
                    确认删除此地址吗？
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary deleteSure">确定</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>

    <div class="copy-right">
        <div class="container">
            <p>Copyright &copy; 2020.XB All rights reserved.<a target="_blank" href="#"></a></p>
        </div>
    </div>
    </div>
</body>
<script src="js/jquery-2.2.3.min.js"></script>
<script src="js/layer.js"></script>
<script src="js/axios-0.19.2.min.js"></script>
<script src="js/vue-2.6.11.js"></script>
<script src="js/jquery-cookie-1.4.1.js"></script>
<script>
    new Vue({
        el:'#app',
        data:{
            categoryList:{},
            user:{},
            addressList:{},
            orderList:{},
            active:5,
            favoriteList:{},
            waitEvalList:{},
            pageCurrent:1,
            pageTotal:1,
            myCarShopCount:0,
            myOrderCount:0,
            newAddress:{userName:'',area:'',addressDetail:'',phone:'',isDefault:"0"},
            myPassword:{password:'',newPassword:'',newPassword2:''},
            name:"新增地址",
            btn:"保存"
        },
        methods:{
            getLoginUserInfo:function () {
                axios({
                    url:'/user/getLoginUserInfo',
                    method:'get'
                }).then(res=>{
                    if (res.data.success){
                        this.user=res.data.obj.user;
                        this.addressList=res.data.obj.addressList;
                        this.myCarShopCount=res.data.obj.myCarShopCount;
                        this.myOrderCount=res.data.obj.myOrderCount;
                    }
                })
            },
            updateUserInfo:function(){
                axios({
                    url:'user/updateUserInfo',
                    method:'put',
                    data:this.user
                }).then(res=>{
                    if (res.data.success){
                        alert("保存成功")
                        this.getLoginUserInfo();
                    }
                })
            },
            getLoginUserAllOrder:function () {
                axios({
                    url:'order/selectAllOrder',
                    method:'get'
                }).then(res=>{
                    if (res.data.success){
                        this.orderList=res.data.obj.list;
                        this.waitEvalList=res.data.obj.waitEval;

                    }
                })
            },
            selectUserFavorite:function (pageCurrent=1) {

                if (pageCurrent<=0){
                    layer.msg('到顶啦');
                    return;
                }
                if (pageCurrent>this.pageTotal){
                    layer.msg('到底啦');
                    return;
                }
                this.pageCurrent=pageCurrent
                axios({
                    url:`user/selectUserFavorite/${this.pageCurrent}`,
                    method:'get'
                }).then(res=>{
                    if (res.data.success){
                        this.favoriteList=res.data.obj.rows;
                        this.pageTotal=res.data.obj.pageTotal;
                    }
                })
            },
            confirmReceive:function (orderId) {
                axios({
                    url:`order/confirmReceive/${orderId}`,
                    method:'put'
                }).then(res=>{
                    if (res.data.success){
                        this.getLoginUserAllOrder();
                    }
                })
            },
            toProductDetail:function(id){
                sessionStorage.setItem("currentProductId",id);
                location.href='goodsDetail.html';
            },
            selectCategoryList:function (){
                axios({
                    url:'/home/categoryList',
                    method:'get'
                }).then(res=>{
                    if (res.data.success){
                        this.categoryList=res.data.obj;
                    }
                }).catch();
            },
            doSaveAddress:function () {
                let address=  JSON.parse(sessionStorage.getItem("currentAddress"));
                this.newAddress.area=""+address.province+address.city+address.district+address.street+address.streetNumber+address.business;
                console.log(this.newAddress)
                axios({
                    url:'user/doSaveAddress',
                    method:'post',
                    data:this.newAddress
                }).then(res=>{
                    if (res.data.success){
                        this.getLoginUserInfo();
                        this.newAddress={userName:'',area:'',addressDetail:'',phone:'',isDefault:"0"};
                        alert('操作成功');
                        this.name="新增地址";
                        this.btn="保存";
                    }
                }).catch();
            },
            toEvaluation:function (orderId) {
                console.log(orderId)
                axios({
                    url:`order/toEvaluation/${orderId}`,
                    method:'put',
                }).then(res=>{
                    if (res.data.success){
                        this.getLoginUserAllOrder();
                    }
                }).catch();
            },
            toUpdatePassword:function () {
                if (this.myPassword.password==''||this.myPassword.newPassword==''||this.myPassword.newPassword2==''){
                    alert("信息有误");
                    return;
                }
                if (this.myPassword.newPassword!=this.myPassword.newPassword2){
                    alert("前后密码不一致");
                    return;
                }
                axios({
                    url:`user/toUpdatePassword`,
                    method:'put',
                    params:{password:this.myPassword.password,rePassword:this.myPassword.newPassword}
                }).then(res=>{
                    alert(res.data.msg)
                }).catch();
            },
            toDetail:function (category) {
                sessionStorage.setItem("currentCategory",JSON.stringify(category));
                location.href='productList.html';
            },
           chaneDML:function (address) {
                this.name="修改地址";
                this.btn="修改";
                this.newAddress=address;
                console.log(this.newAddress)
            },
            changeChecked:function (flag) {
                this.newAddress.isDefault=!flag;
                console.log(this.newAddress)
            },
            doDeleteAddress:function (address) {
                axios({
                    url:`user/doDeleteAddress`,
                    method:'delete',
                    params:{id:address.id}
                }).then(res=>{
                   if (res.data.success){
                       this.getLoginUserInfo();
                       alert(res.data.msg)

                   }
                }).catch();
            }


        },
        created:function () {
            this.selectCategoryList();
            this.getLoginUserInfo();
            this.getLoginUserAllOrder();
            this.selectUserFavorite();
        }
    })
</script>
<script src="js/jquery.js"></script>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=6PVV6WP9bLyvP8Gs23ZW2kQ0Blw2Fwvt"></script>
<script type="text/javascript" src="js/map.jquery.js"></script>
<script src="js/profile.js"></script>
</html>